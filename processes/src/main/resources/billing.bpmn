<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_0hrd90c" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="1.16.2">
  <bpmn:collaboration id="billing-collaboration">
    <bpmn:participant id="billing-participant" name="Billing Collaboration" processRef="billing-process" />
  </bpmn:collaboration>
  <bpmn:process id="billing-process" name="Billing Process" isExecutable="true">
    <bpmn:laneSet id="LaneSet_0n99z4g">
      <bpmn:lane id="approvement-lane" name="Approvement">
        <bpmn:flowNodeRef>approve-invoice-task</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ExclusiveGateway_0pfgqb6</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>reject-invoice-task</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>release-invoice-task</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>end-rejected</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>end-released</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="submission-lane" name="Submission">
        <bpmn:flowNodeRef>save-invoice-task</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>start</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:userTask id="approve-invoice-task" name="Approve invoice">
      <bpmn:incoming>SequenceFlow_075qofc</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1rt21uf</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="save-invoice-task" name="Save invoice" camunda:delegateExpression="#{saveInvoice}">
      <bpmn:incoming>SequenceFlow_0z9vrca</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_075qofc</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:startEvent id="start">
      <bpmn:outgoing>SequenceFlow_0z9vrca</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_075qofc" sourceRef="save-invoice-task" targetRef="approve-invoice-task" />
    <bpmn:sequenceFlow id="SequenceFlow_1rt21uf" sourceRef="approve-invoice-task" targetRef="ExclusiveGateway_0pfgqb6" />
    <bpmn:sequenceFlow id="SequenceFlow_0z9vrca" sourceRef="start" targetRef="save-invoice-task" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0pfgqb6" name="OK?" default="SequenceFlow_06c4bin">
      <bpmn:incoming>SequenceFlow_1rt21uf</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_06c4bin</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0bxazbh</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="reject-invoice-task" name="Reject invoice" camunda:delegateExpression="#{rejectInvoice}">
      <bpmn:incoming>SequenceFlow_06c4bin</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1g9b7tk</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="release-invoice-task" name="Release invoice" camunda:delegateExpression="#{releaseInvoice}">
      <bpmn:incoming>SequenceFlow_0bxazbh</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_19ho3so</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="end-rejected" name="rejected">
      <bpmn:incoming>SequenceFlow_1g9b7tk</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="end-released" name="released">
      <bpmn:incoming>SequenceFlow_19ho3so</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_06c4bin" sourceRef="ExclusiveGateway_0pfgqb6" targetRef="reject-invoice-task" />
    <bpmn:sequenceFlow id="SequenceFlow_1g9b7tk" sourceRef="reject-invoice-task" targetRef="end-rejected" />
    <bpmn:sequenceFlow id="SequenceFlow_19ho3so" sourceRef="release-invoice-task" targetRef="end-released" />
    <bpmn:sequenceFlow id="SequenceFlow_0bxazbh" sourceRef="ExclusiveGateway_0pfgqb6" targetRef="release-invoice-task">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${approved == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="billing-collaboration">
      <bpmndi:BPMNShape id="Participant_1jwaxs7_di" bpmnElement="billing-participant">
        <dc:Bounds x="8" y="8" width="553" height="362" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="start">
        <dc:Bounds x="69" y="50" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0z9vrca_di" bpmnElement="SequenceFlow_0z9vrca">
        <di:waypoint x="105" y="68" />
        <di:waypoint x="144" y="68" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1rt21uf_di" bpmnElement="SequenceFlow_1rt21uf">
        <di:waypoint x="244" y="200" />
        <di:waypoint x="271" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_1jp9jxr_di" bpmnElement="save-invoice-task">
        <dc:Bounds x="144" y="28" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_0loaetb_di" bpmnElement="approve-invoice-task">
        <dc:Bounds x="144" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0pfgqb6_di" bpmnElement="ExclusiveGateway_0pfgqb6" isMarkerVisible="true">
        <dc:Bounds x="271" y="175" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="311" y="219" width="22" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1qp37c2_di" bpmnElement="submission-lane">
        <dc:Bounds x="38" y="8" width="523" height="128" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0qpbuwc_di" bpmnElement="approvement-lane">
        <dc:Bounds x="38" y="136" width="523" height="234" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_075qofc_di" bpmnElement="SequenceFlow_075qofc">
        <di:waypoint x="194" y="108" />
        <di:waypoint x="194" y="160" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_0jp1au5_di" bpmnElement="end-rejected">
        <dc:Bounds x="501" y="182" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="499" y="227" width="40" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_0iskqx6_di" bpmnElement="end-released">
        <dc:Bounds x="501" y="292" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="498" y="335" width="43" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_10a6k6w_di" bpmnElement="release-invoice-task">
        <dc:Bounds x="358" y="270" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_1n342cs_di" bpmnElement="reject-invoice-task">
        <dc:Bounds x="358" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_06c4bin_di" bpmnElement="SequenceFlow_06c4bin">
        <di:waypoint x="321" y="200" />
        <di:waypoint x="358" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1g9b7tk_di" bpmnElement="SequenceFlow_1g9b7tk">
        <di:waypoint x="458" y="200" />
        <di:waypoint x="501" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_19ho3so_di" bpmnElement="SequenceFlow_19ho3so">
        <di:waypoint x="458" y="310" />
        <di:waypoint x="501" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0bxazbh_di" bpmnElement="SequenceFlow_0bxazbh">
        <di:waypoint x="296" y="225" />
        <di:waypoint x="296" y="310" />
        <di:waypoint x="358" y="310" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
